# Инструкция по подготовке и запуску приложения

## Работа с GIT
* Cоздаем локуальную дирректорию для проекта
### Устанваливаем и настраиваем GIT
* ```sudo apt install git```
* ```git config --global user.email 'ваш email'```
* ```git config --global user.name 'ваше имя'```
### Клонируем репозиторий
* ```git clone https://github.com/arakut/artV12.git```

## Установка, создание и активация виртуального окружения
### Установка
* ```sudo apt install -y python3-venv```
### Создание
* ```python3 -m venv env```
### Активация
* ```source env/bin/activate```

## Настройка брандмауэра
### Установка утилиты для работы с брандмауэром
* ```sudo apt install ufw```
### Проверка текущего статуса
* ```sudo ufw status verbose (должно быть inactive)```
### Включение firewall
* ```sudo ufw enable```
### Разрешение доступа к порту
* ```sudo ufw allow 5000```

## Установка, создание и настройка базы данных
### Установка баы данных Postgres
* ```sudo apt install postgresql postgresql-contrib```
### Настройка базы данных
1) ```sudo -u postgres psql```
2) ```$\password```
3) Вводим новый пароль. Данный пароль треубется указать в файле ```main.py``` для переменной ```DB_PASS``` для успешного подлючения приложения к базе данных.
4) Сохраняем пароль и выходим обратно в терминал (```Ctrl``` + ```d```)
### Создание базы данных
* ```sudo -u postgres createdb inputs_db```
Вместо ```inputs_db``` можно указать другое имя, но тогда его потребуется заменить в ```main.py``` для переменной` ```DB_NAME```
### Проверка наличия созданной новой базы
* ```sudo -u postgres psql -c "\l"```

Будет выведен список всех баз данных, где одна из них будет наша, которую только что созданная.

## Миграции в бд и запуск и приложения
### Устновка зависимостей приложения
* ```pip install -r requirements.txt```
### Выполнения миграций в базу данных
* ```export FLASK_APP=main.py```
* ```flask db init```
* ```flask db migrate```
* ```flask db upgrade```
### Запус приложения
* ```flask run```
